<nav class="navbar d-flex mx-3">

    <div class="d-flex justify-content-start">
        @* To the left *@
        <a class="navbar-brand" href="#" @onclick="RemoveOtherComponents"><img src="images/Logo2.png" alt="logo2" /></a>
        @foreach (var group in UICartService!.CaregoryLinkGroups)
        {
            <CategoryTitleComponent LinkGroup="group" OnTitleUpdate="OnTitlePressedCallBack" />
        }
    </div>

    <div class="d-flex justify-content-end search-width">
        @* To the right *@

        <div class="input-group flex-nowrap me-1">
            <span class="input-group-text rounded-0" id="addon-wrapping"><i class="bi bi-search"></i></span>
            <input type="text" class="form-control rounded-0" placeholder="Search" aria-label="Username" aria-describedby="addon-wrapping">
        </div>

        <div class="d-flex">
            <div class="position-relative">
                <button id="cart-button" type="button" class="btn"><i class="bi bi-heart"></i></button>
            </div>

            <div class="position-relative">
                <button id="cart-button" data-bs-toggle="modal" data-bs-target="#cart" type="button" class="btn"><i class="bi bi-cart"></i></button>

                @*<div class="cart-count bg-danger text-white rounded-circle position-absolute">@UICartService!.CartItems.Count</div>*@
            </div>

            <div></div>
        </div>
    </div>
</nav>

<CartComponent />

<div>
    <hr>
</div>


@code {
    [CascadingParameter(Name = "Service")] public UIService? UICartService { get; set; }
    [Parameter] public EventCallback OnChange { get; set; }

    async Task OnTitlePressedCallBack(int id)
    {
        if (OnChange.HasDelegate && UICartService is not null)
        {
            await UICartService.OnCategoryLinkClick(id);
            await OnChange.InvokeAsync(id);
        }
    }

    private void RemoveOtherComponents()
    {
        
    }
    protected override async Task OnInitializedAsync()
    {
        if (UICartService is not null)
        {
            await UICartService.GetLinkGroup();
            await OnChange.InvokeAsync();
        }
    }
    @*protected override async Task OnParametersSetAsync()
    {
        UICartService!.CartItems =
            await UICartService!.ReadStorage<List<CartItemDTO>>("CartItems") ?? [];
    }*@

   @* async Task OnRemoveCartItem(CartItemDTO? cartItem)
    {
        UICartService!.CartItems.Remove(cartItem);
        await UICartService!.SaveToStorage("CartItems", UICartService!.CartItems);
    }*@

}